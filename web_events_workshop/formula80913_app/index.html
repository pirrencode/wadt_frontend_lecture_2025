<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Race — три машинки</title>
<style>
  :root { --lane-h: 160px; --gap: 18px; }
  * { box-sizing: border-box; }
  body {
    margin: 0; padding: 24px;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background: #f6f7fb;
  }
  h1 { margin: 0 0 14px; font-size: 20px; }
  .lanes { display: flex; flex-direction: column; gap: var(--gap); margin-bottom: 16px; }
  .lane {
    position: relative; height: var(--lane-h); background: #fff; overflow: hidden;
    border-radius: 14px; border: 1px solid rgba(0,0,0,.06); box-shadow: 0 6px 18px rgba(0,0,0,.07);
  }
  .lane::before{
    content:""; position:absolute; left:0; right:0; top:50%; height:4px; transform:translateY(-50%);
    background: repeating-linear-gradient(90deg,#ddd 0 24px, transparent 24px 42px); opacity:.6;
  }

  /* Финишная линия */
  .finish {
    position: absolute; right: 22px; top: 0; width: 28px; height: 100%;
    background: conic-gradient(#000 0 25%,#fff 0 50%,#000 0 75%,#fff 0) 0 0/14px 14px;
    outline: 2px solid #1112; outline-offset: -2px;
  }

  .car {
    position: absolute; top: 50%; left: -30vw; transform: translateY(-50%);
    height: calc(var(--lane-h) - 24px);
    filter: drop-shadow(0 6px 10px rgba(0,0,0,.18));
  }

  /* Запуск анимации по классу .go */
  .go .car--1 { animation: drive 4s linear forwards; }  /* быстрая */
  .go .car--2 { animation: drive 6s linear forwards; }  /* средняя */
  .go .car--3 { animation: drive 8s linear forwards; }  /* медленная */

  @keyframes drive {
    0%   { transform: translate(-30vw, -50%); }
    100% { transform: translate(calc(100vw - 140px), -50%); }
  }

  .controls { display: flex; justify-content: center; margin-top: 10px; }
  button {
    padding: 12px 18px; font-size: 16px; border-radius: 12px; border: 0;
    background: #111; color: #fff; cursor: pointer; box-shadow: 0 8px 18px rgba(0,0,0,.12);
  }
  button:active { transform: translateY(1px); }

  @media (max-width: 600px) { :root { --lane-h: 130px; } }
</style>
</head>
<body>
  <h1>Гонка: первая быстрее второй, вторая быстрее третьей</h1>

  <div id="race" class="lanes">
    <div class="lane">
      <img class="car car--1" src="data:image/jpeg;base64,PUT_BASE64_CAR1_HERE" alt="Car 1 (быстрая)">
      <div class="finish" aria-hidden="true"></div>
    </div>
    <div class="lane">
      <img class="car car--2" src="data:image/jpeg;base64,PUT_BASE64_CAR2_HERE" alt="Car 2 (средняя)">
      <div class="finish" aria-hidden="true"></div>
    </div>
    <div class="lane">
      <img class="car car--3" src="data:image/jpeg;base64,PUT_BASE64_CAR3_HERE" alt="Car 3 (медленная)">
      <div class="finish" aria-hidden="true"></div>
    </div>
  </div>

  <div class="controls">
    <button id="btn">Race</button>
  </div>

<script>
  const race = document.getElementById('race');
  const btn  = document.getElementById('btn');

  function startRace() {
    race.classList.remove('go');
    void race.offsetWidth; // перезапуск анимации
    race.classList.add('go');
  }

  btn.addEventListener('click', startRace);
  startRace(); // старт сразу при загрузке
</script>
</body>
</html>
